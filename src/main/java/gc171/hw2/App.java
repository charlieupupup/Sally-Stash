/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package gc171.hw2;

import java.io.IOException;

/*

    the main app

    makes up of 4 part:
        player(database, back end)

        instruction & display system(front end)

        judge(state control)


 */

public class App {
    private Player playerA;
    private Player playerB;
    private Boolean aIsHuman;
    private Boolean bIsHuman;
    private Instruction instruction = new Instruction();
    private Judge judge = new Judge();
    private PreGame preGame = new PreGame();
    private Game game = new Game();

    public static void main(String[] args) throws IOException {
        App main = new App();

        //first decide player role
        PlayerRole playerRole = new PlayerRole();
        main.aIsHuman = playerRole.isHuman("A");
        main.bIsHuman = playerRole.isHuman("B");

        //init player
        main.setPlayer();

        //pre game
       main.preGame.prepareGame(main.playerA);
       main.preGame.prepareGame(main.playerB);

        //game
        while (true) {
            main.game.exeGame(main.playerA, main.playerB);
            if (main.judge.win(main.playerB)) {
                main.instruction.win(main.playerA.getPlayerName());
                break;
            }

            main.game.exeGame(main.playerB, main.playerA);
            if (main.judge.win(main.playerA)) {
                main.instruction.win(main.playerB.getPlayerName());
                break;
            }

        }

    }

    //init 2 players
    public void setPlayer() {
        Integer row = 20;
        Integer col = 10;

        if (aIsHuman) {
            playerA = new Player(row, col, "A", "B");
        }
        else {
            playerA = new Bot(row, col, "A", "B");
        }

        if (bIsHuman) {
            playerB = new Player(row, col, "B", "A");
        }
        else {
            playerB = new Bot(row, col, "B", "A");
        }

    }


}
